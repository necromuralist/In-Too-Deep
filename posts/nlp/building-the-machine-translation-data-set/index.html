<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#">
<head>
<meta charset="utf-8">
<meta content="Building the data set for the machine translation assignment." name="description">
<meta content="width=device-width, initial-scale=1" name="viewport">
<title>Building the Machine Translation Training Set | Neurotic Networking</title>
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<meta content="Nikola (getnikola.com)" name="generator">
<link href="../../../rss.xml" rel="alternate" title="RSS" type="application/rss+xml">
<link href="https://necromuralist.github.io/Neurotic-Networking/posts/nlp/building-the-machine-translation-data-set/" rel="canonical"><!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]-->
<link href="../../../apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">
<link href="../../../favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
<link href="../../../favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
<link href="../../../site.webmanifest" rel="manifest">
<meta content="Cloistered Monkey" name="author">
<link href="../english-to-french-data/" rel="prev" title="Loading the English and French Word Embeddings" type="text/html">
<link href="../machine-translation/" rel="next" title="Machine Translation" type="text/html">
<meta content="Neurotic Networking" property="og:site_name">
<meta content="Building the Machine Translation Training Set" property="og:title">
<meta content="https://necromuralist.github.io/Neurotic-Networking/posts/nlp/building-the-machine-translation-data-set/" property="og:url">
<meta content="Building the data set for the machine translation assignment." property="og:description">
<meta content="article" property="og:type">
<meta content="2020-10-20T19:10:34-07:00" property="article:published_time">
<meta content="machine translation" property="article:tag">
<meta content="nlp" property="article:tag">
</head>
<body>
<a class="sr-only sr-only-focusable" href="#content">Skip to main content</a> <!-- Menubar -->
<nav class="navbar navbar-expand-md static-top mb-4 navbar-light bg-light">
<div class="container"><!-- This keeps the margins nice -->
 <a class="navbar-brand" href="https://necromuralist.github.io/Neurotic-Networking/"><span id="blog-title">Neurotic Networking</span></a> <button aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#bs-navbar" data-toggle="collapse" type="button"><span class="navbar-toggler-icon"></span></button>
<div class="collapse navbar-collapse" id="bs-navbar">
<ul class="navbar-nav mr-auto">
<li class="nav-item"><a class="nav-link" href="../../../archive.html">Archive</a></li>
<li class="nav-item"><a class="nav-link" href="../../../categories/">Tags</a></li>
<li class="nav-item"><a class="nav-link" href="../../../rss.xml">RSS feed</a></li>
<li class="nav-item"><a class="nav-link" href="https://necromuralist.github.io/">Cloistered Monkey</a></li>
</ul>
<!-- Google custom search -->
<form action="https://www.google.com/search" class="navbar-form navbar-right" method="get" role="search">
<div class="form-group"><input class="form-control" name="q" placeholder="Search" type="text"></div>
<!-- 
<button type="submit" class="btn btn-primary">
        <span class="glyphicon glyphicon-search"></span>
</button>
-->
<input name="sitesearch" type="hidden" value="https://necromuralist.github.io/Neurotic-Networking/"></form>
<!-- End of custom search -->
<ul class="navbar-nav navbar-right">
<li class="nav-item"><a class="nav-link" href="index.org" id="sourcelink">Source</a></li>
</ul>
</div>
<!-- /.navbar-collapse --></div>
<!-- /.container --></nav>
<!-- End of Menubar -->
<div class="container" id="content" role="main">
<div class="body-content"><!--Body content-->
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title" itemprop="headline name"><a class="u-url" href=".">Building the Machine Translation Training Set</a></h1>
<div class="metadata">
<p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">Cloistered Monkey</span></p>
<p class="dateline"><a href="." rel="bookmark"><time class="published dt-published" datetime="2020-10-20T19:10:34-07:00" itemprop="datePublished" title="2020-10-20 19:10">2020-10-20 19:10</time></a></p>
<p class="sourceline"><a class="sourcelink" href="index.org">Source</a></p>
</div>
</header>
<div class="e-content entry-content" itemprop="articleBody text">
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org2a06046">Beginning</a>
<ul>
<li><a href="#orgabc54a6">Imports</a></li>
<li><a href="#org559ed4c">Set Up</a></li>
</ul>
</li>
<li><a href="#org032a0f0">Middle</a>
<ul>
<li><a href="#org2284d45">Generate Embedding and Transform Matrices</a></li>
<li><a href="#org137f074">Getting the Training Sets</a></li>
</ul>
</li>
<li><a href="#org802966a">End</a></li>
</ul>
</div>
</div>
<div class="highlight">
<pre><span></span><span class="o">&lt;&lt;</span><span class="n">imports</span><span class="o">&gt;&gt;</span>

<span class="o">&lt;&lt;</span><span class="n">dotenv</span><span class="o">&gt;&gt;</span>

<span class="o">&lt;&lt;</span><span class="n">embeddings</span><span class="o">&gt;&gt;</span>

<span class="o">&lt;&lt;</span><span class="n">get</span><span class="o">-</span><span class="n">matrices</span><span class="o">&gt;&gt;</span>

<span class="o">&lt;&lt;</span><span class="n">training</span><span class="o">-</span><span class="n">testing</span><span class="o">-</span><span class="n">data</span><span class="o">&gt;&gt;</span>
</pre></div>
<div class="outline-2" id="outline-container-org2a06046">
<h2 id="org2a06046">Beginning</h2>
<div class="outline-text-2" id="text-org2a06046">
<p>This continues from a prior post where we <a href="../english-to-french-data/">built the EmbeddingsLoader</a> to gather the word-embeddings that match our French and English dictionaries.</p>
</div>
<div class="outline-3" id="outline-container-orgabc54a6">
<h3 id="orgabc54a6">Imports</h3>
<div class="outline-text-3" id="text-orgabc54a6">
<div class="highlight">
<pre><span></span><span class="c1"># pypi</span>
<span class="kn">from</span> <span class="nn">dotenv</span> <span class="kn">import</span> <span class="n">load_dotenv</span>

<span class="kn">import</span> <span class="nn">attr</span>
<span class="kn">import</span> <span class="nn">numpy</span>

<span class="c1"># my stuff</span>
<span class="kn">from</span> <span class="nn">neurotic.nlp.word_embeddings.embeddings</span> <span class="kn">import</span> <span class="n">EmbeddingsLoader</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org559ed4c">
<h3 id="org559ed4c">Set Up</h3>
<div class="outline-text-3" id="text-org559ed4c"></div>
<div class="outline-4" id="outline-container-orga70b3df">
<h4 id="orga70b3df">The Dotenv</h4>
<div class="outline-text-4" id="text-orga70b3df">
<p>This loads the paths to the files.</p>
<div class="highlight">
<pre><span></span> <span class="n">load_dotenv</span><span class="p">(</span><span class="s2">"posts/nlp/.env"</span><span class="p">,</span> <span class="n">override</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-4" id="outline-container-org6d0626b">
<h4 id="org6d0626b">The Embeddings</h4>
<div class="outline-text-4" id="text-org6d0626b">
<p>Instead of using the subset word-embeddings that the course created I'm going to try and load the whole word embeddings from scratch. I defined the EmbeddingsLoader in {% lancelot title="this post" %}english-to-french-data{% /lancelot %} so I'll just load it here.</p>
<div class="highlight">
<pre><span></span> <span class="n">loader</span> <span class="o">=</span> <span class="n">EmbeddingsLoader</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org032a0f0">
<h2 id="org032a0f0">Middle</h2>
<div class="outline-text-2" id="text-org032a0f0"></div>
<div class="outline-3" id="outline-container-org2284d45">
<h3 id="org2284d45">Generate Embedding and Transform Matrices</h3>
<div class="outline-text-3" id="text-org2284d45">
<p>Our English and French Embeddings are stored as word:vector dictionaries. To work with the embeddings we're going to need to convert them to matrices. At the same time we need to filter out words that are in one set but not the other so we're going to brute force it a little.</p>
<div class="highlight">
<pre><span></span><span class="k">def</span> <span class="nf">get_matrices</span><span class="p">(</span><span class="n">en_fr</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">french_vecs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">english_vecs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Args:</span>
<span class="sd">       en_fr: English to French dictionary</span>
<span class="sd">       french_vecs: French words to their corresponding word embeddings.</span>
<span class="sd">       english_vecs: English words to their corresponding word embeddings.</span>

<span class="sd">    Return: </span>
<span class="sd">       X: a matrix where the columns are the English embeddings.</span>
<span class="sd">       Y: a matrix where the columns correspond to the French embeddings.</span>
<span class="sd">    """</span>

    <span class="c1">### START CODE HERE (REPLACE INSTANCES OF 'None' with your code) ###</span>

    <span class="c1"># X_l and Y_l are lists of the english and french word embeddings</span>
    <span class="c1"># X_l = list()</span>
    <span class="c1"># Y_l = list()</span>

    <span class="c1"># get the english words (the keys in the dictionary) and store in a set()</span>
    <span class="n">english_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">english_vecs</span><span class="p">)</span>

    <span class="c1"># get the french words (keys in the dictionary) and store in a set()</span>
    <span class="n">french_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">french_vecs</span><span class="p">)</span>

    <span class="c1"># store the french words that are part of the english-french dictionary (these are the values of the dictionary)</span>
    <span class="c1"># french_words = set(en_fr.values())</span>
    <span class="n">filtered</span> <span class="o">=</span> <span class="p">{</span><span class="n">english_word</span><span class="p">:</span> <span class="n">french_word</span>
                <span class="k">for</span> <span class="n">english_word</span><span class="p">,</span> <span class="n">french_word</span> <span class="ow">in</span> <span class="n">en_fr</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">english_word</span> <span class="ow">in</span> <span class="n">english_set</span> <span class="ow">and</span> <span class="n">french_word</span> <span class="ow">in</span> <span class="n">french_set</span><span class="p">}</span>
    <span class="n">X</span> <span class="o">=</span> <span class="p">[</span><span class="n">english_vecs</span><span class="p">[</span><span class="n">english_word</span><span class="p">]</span> <span class="k">for</span> <span class="n">english_word</span> <span class="ow">in</span> <span class="n">filtered</span><span class="p">]</span>
    <span class="n">Y</span> <span class="o">=</span> <span class="p">[</span><span class="n">french_vecs</span><span class="p">[</span><span class="n">french_word</span><span class="p">]</span> <span class="k">for</span> <span class="n">french_word</span> <span class="ow">in</span> <span class="n">filtered</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>

    <span class="c1"># loop through all english, french word pairs in the english french dictionary</span>

    <span class="c1"># for en_word, fr_word in en_fr.items():</span>
    <span class="c1"># </span>
    <span class="c1">#     # check that the french word has an embedding and that the english word has an embedding</span>
    <span class="c1">#     if fr_word in french_set and en_word in english_set:</span>
    <span class="c1"># </span>
    <span class="c1">#         # get the english embedding</span>
    <span class="c1">#         en_vec = english_vecs[en_word]</span>
    <span class="c1"># </span>
    <span class="c1">#         # get the french embedding</span>
    <span class="c1">#         fr_vec = french_vecs[fr_word]</span>
    <span class="c1"># </span>
    <span class="c1">#         # add the english embedding to the list</span>
    <span class="c1">#         X_l.append(en_vec)</span>
    <span class="c1"># </span>
    <span class="c1">#         # add the french embedding to the list</span>
    <span class="c1">#         Y_l.append(fr_vec)</span>
    <span class="c1"># </span>
    <span class="c1"># # stack the vectors of X_l into a matrix X</span>
    <span class="c1"># X = numpy.vstack(X_l)</span>
    <span class="c1"># </span>
    <span class="c1"># # stack the vectors of Y_l into a matrix Y</span>
    <span class="c1"># Y = numpy.vstack(Y_l)</span>
    <span class="c1">### END CODE HERE ###</span>

    <span class="c1"># return X, Y</span>
    <span class="k">return</span> <span class="n">numpy</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span><span class="n">X</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span><span class="n">Y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org137f074">
<h3 id="org137f074">Getting the Training Sets</h3>
<div class="outline-text-3" id="text-org137f074">
<div class="highlight">
<pre><span></span><span class="nd">@attr</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="n">auto_attribs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">TrainingData</span><span class="p">:</span>
    <span class="sd">"""Converts the embeddings into a test set</span>

<span class="sd">    Args:</span>
<span class="sd">     loader: EmbeddingsLoader instance</span>
<span class="sd">    """</span>
    <span class="n">_loader</span><span class="p">:</span> <span class="n">EmbeddingsLoader</span><span class="o">=</span><span class="kc">None</span>
    <span class="n">_english_vocabulary</span><span class="p">:</span> <span class="nb">set</span><span class="o">=</span><span class="kc">None</span>
    <span class="n">_french_vocabulary</span><span class="p">:</span> <span class="nb">set</span><span class="o">=</span><span class="kc">None</span>
    <span class="n">_filtered</span><span class="p">:</span> <span class="nb">dict</span><span class="o">=</span><span class="kc">None</span>
    <span class="n">_x_train</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="o">=</span><span class="kc">None</span>
    <span class="n">_y_train</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="o">=</span><span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">loader</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EmbeddingsLoader</span><span class="p">:</span>
        <span class="sd">"""A loader for the embeddings subsets"""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loader</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_loader</span> <span class="o">=</span> <span class="n">EmbeddingsLoader</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loader</span>

    <span class="nd">@loader</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">loader</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_loader</span><span class="p">:</span> <span class="n">EmbeddingsLoader</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">"""Sets the embeddings loader"""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_loader</span> <span class="o">=</span> <span class="n">new_loader</span>
        <span class="k">return</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">english_vocabulary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">:</span>
        <span class="sd">"""The english embeddings subset words"""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_english_vocabulary</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_english_vocabulary</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">english_subset</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_english_vocabulary</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">french_vocabulary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">:</span>
        <span class="sd">"""The french embeddings subset words"""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_french_vocabulary</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_french_vocabulary</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">french_subset</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_french_vocabulary</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">filtered</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">"""A {enlish:french} dict filtered down</span>

<span class="sd">       This is a dict made of the original english-french dictionary created</span>
<span class="sd">       by the embeddings loader but filtered down so that the key is in the</span>
<span class="sd">       ``english_vocabulary`` and the value is in the ``french_vocabulary``</span>

<span class="sd">       This is used to ensure that the training set is created it will only</span>
<span class="sd">       contain terms that have entries in both embeddings subsets</span>
<span class="sd">       """</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_filtered</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_filtered</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">english_word</span><span class="p">:</span> <span class="n">french_word</span>
                <span class="k">for</span> <span class="n">english_word</span><span class="p">,</span> <span class="n">french_word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">training</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">english_word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">english_vocabulary</span> <span class="ow">and</span>
                    <span class="n">french_word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">french_vocabulary</span><span class="p">)}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_filtered</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">x_train</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="sd">"""The english-language embeddings as row-vectors"""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x_train</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_x_train</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">english_subset</span><span class="p">[</span><span class="n">english_word</span><span class="p">]</span>
                 <span class="k">for</span> <span class="n">english_word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filtered</span><span class="p">]</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x_train</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">y_train</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="sd">"""The french-language embeddings as row-vectors"""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y_train</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_y_train</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">french_subset</span><span class="p">[</span><span class="n">french_word</span><span class="p">]</span>
                 <span class="k">for</span> <span class="n">french_word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filtered</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y_train</span>

    <span class="k">def</span> <span class="nf">check_rep</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">"""Checks the shape of the training data</span>


<span class="sd">       Note:</span>
<span class="sd">        since this checks those attributes they will be built if they don't</span>
<span class="sd">        already exist</span>

<span class="sd">       Raises:</span>
<span class="sd">        AttributeError - there'se something unexpected about the shape of the data</span>
<span class="sd">       """</span>
        <span class="n">rows</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_train</span><span class="o">.</span><span class="n">shape</span>
        <span class="k">assert</span> <span class="n">rows</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filtered</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">columns</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">english_subset</span><span class="o">.</span><span class="n">values</span><span class="p">())))</span>

        <span class="n">rows</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y_train</span><span class="o">.</span><span class="n">shape</span>
        <span class="k">assert</span> <span class="n">rows</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filtered</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">columns</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">french_subset</span><span class="o">.</span><span class="n">values</span><span class="p">())))</span>            
        <span class="k">return</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org802966a">
<h2 id="org802966a">End</h2>
<div class="outline-text-2" id="text-org802966a">
<ul class="org-ul">
<li>The post that collects all the posts for this project is <a href="../machine-translation/">Machine Translation</a>.</li>
<li>The next post in this series is <a href="../machine-translation-transformation-matrix/">Training the Machine Translation Transformation Matrix</a></li>
</ul>
</div>
</div>
</div>
<aside class="postpromonav">
<nav>
<ul class="tags" itemprop="keywords">
<li><a class="tag p-category" href="../../../categories/machine-translation/" rel="tag">machine translation</a></li>
<li><a class="tag p-category" href="../../../categories/nlp/" rel="tag">nlp</a></li>
</ul>
<ul class="pager hidden-print">
<li class="previous"><a href="../english-to-french-data/" rel="prev" title="Loading the English and French Word Embeddings">Previous post</a></li>
<li class="next"><a href="../machine-translation/" rel="next" title="Machine Translation">Next post</a></li>
</ul>
</nav>
</aside>
</article>
<!--End of body content-->
<footer id="footer"><a href="http://creativecommons.org/licenses/by/4.0/" rel="license"><img alt="Creative Commons License" id="license-image" src="https://i.creativecommons.org/l/by/4.0/80x15.png" style="border-width:0"></a>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/" rel="license">Creative Commons Attribution 4.0 International License</a>. <a href="mailto:necromuralist@protonmail.com">Cloistered Monkey</a> - Powered by <a href="https://getnikola.com" rel="nofollow">Nikola</a></footer>
</div>
</div>
<script src="../../../assets/js/all-nocdn.js"></script>
<script>

    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
</script>
</body>
</html>
